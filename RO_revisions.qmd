---
title: "Analyses"
format: 
  html:
    code-fold: true
    theme: flatly
comments: 
  hypothesis: true
bibliography      : "r-references.bib"

abstract: | 
 *Gender diversity is becoming more salient in that more people identify beyond the binary. This study (N = ) investigated how more inclusive response options affected gender categorization in terms of options chosen and categorical perception. Participants were more likely to categorize gender beyond the binary when provided with explicit response options, such as "non-binary" and "I don't know". Additional responses did not affect categorical perception. The study highlights the importance of careful consideration of response options in gender categorization research. 
 
 *Problem statement can be made much clearer*

editor: visual
date: "`r format(Sys.time(), '%B %d, %Y')`"
---


---
```{r setup,warning = FALSE, message = FALSE}
library("papaja")
library(brms)
library(tidyverse)
citations <- r_refs("r-references.bib")

library(brms)
library(tidyverse)
source("src/functions.r")
d <-  read.csv("data/data.csv") %>% 
    mutate(across(!starts_with("Gender"), as.character)) %>% 
    mutate(id = 1:nrow(.)) %>% 
    #arrange(condition.1) %>% 
    pivot_longer(
      cols = !c(id, Age_1, starts_with("Gender"), starts_with("choose"), contains("assign"), starts_with("Prolific"), starts_with("TIME")),
      names_to = "face",
      values_to = "categorization") %>% 
    #separate(face, c("condition", "face", "morph", "scale")) %>% 
   select(id, face, categorization, Age_1, Gender_1, starts_with("Gender")) %>% 
   filter(!categorization == "") %>%   
    separate(face, c("condition", "face", "morph", "scale")) %>% 
    mutate(race = substr(face, 1,1),
           masc = recode(morph, "0" = "0", "1" = "16.67", "2"= "33.33","3" = "50",
                         "4" = "66.67", "5" ="83.33", "6" =  "100")) %>% 
    mutate(masc = as.numeric(masc)) %>% 
    mutate(masc = ifelse(race != "w", masc, 100 - masc)) %>% 
  mutate(fem = 100 - masc) %>% 
  filter(id !=125)
  


```

```{r analysis-preferences}
# Seed for random number generation
set.seed(42)
knitr::opts_chunk$set(cache.extra = knitr::rand_seed)
```

Many transgender and gender diverse (TGD) people experience gender as fluid, diffuse, and not bounded by the typical western binary of women and men [@richards_non-binary_2016, @hyde_future_2018]. In surveys and questionnaires that measure gender identity, however, gender is often constructed as a binary, where response options are limited to the categories to woman/female and man/male [@saperstein_categorical_2021]. Such measurement invisibilise and and implicitly deligitimze TGD identities [@ansara_methodologies_2014]. Recently, psychologists have been encouraged to include a wider range response options [@saperstein_categorical_2021] or using free text options [@lindqvist_what_2020] practices which are becoming widely adopted  (see for example [I have a number of articles that did this]).

Research on gender categorization of others, however, is is still dominating by binary response options (see for example @jung_automaticity_2019). Here we report two studies demonstrating how gender categorization of faces can be measured without reinforcing binary gender norms. Such binary can be reflected in reposnse options that posit male and female as opposites by placing them at the ends of a single dimension or providing woman and man as the only options to choose from. 

## Two Challenges to the Gender Bianry

*We talked about calling this the first and second wave of challenges to the gender. But its always a little frightening to call someone the first anything, in case one is wrong, so I've called this, "an early wave"*

Western psychology has had successive waves of pioneers challenging norms of binary gender; an early such challenge came from Sandra Bem in the 70s (Bem, 1974). She argued that femininity and masculinity are not mutually exclusive and need to be measure separately. The Bem Sex Role Inventory (BSRI), which she constructed, challenged prevailing norms of viewing gender as a one-dimensional construct. Previously, gender was most commonly viewed as a single dimension varying from feminine to masculine. Such a definition of gender implies that femininity is, by definition, the opposite of masculinity The BSRI, in contrast, treated gender as two dimensions - femininity and masculinity - which are independent of each other. This construction allowed for alternative combinations of gender to the binary, such as androgynous which meant scoring high on both femininity and masculinity, and agender which meant scoring low on both. This two-dimensional approach two gender has been cited as an important milestone in progressive measurement (queering bem). 

Characteristically for western research of its time, Bem's work was still largely carried out within a binary gender framework, even as it implicitly challenged that framework. The BSRI defined gender as a psychological trait and the people possessing those traits were still seen as either women or men. Since then, as the extent of gender diversity has become more known (national geographic *an article*), it has become increasingly understood that any measurement which does not take this gender diversity into account is insufficient on its own.

A later wave of challenges to the gender binary in psychology arrived in the 2010s and aimed to highlight this gap. This wave of scholars, often drawing from feminist research and writing, was more explicit about the need for psychology to make room for trans and non-binary gender identity  [@hyde_future_2018; @richards_non-binary_2016](+morgenroth).  @saperstein_categorical_2021 suggested that surveys measuring gender include a range of response options, such as non-binary, other, transman, agender and more. Lindqvist et al. (2020) suggested an open text entry where participants can fill in their gender in an open-ended format. The free text response has the advantage of being completely unconstrained, allowing participants to enter any category, including categories which may not have occurred to the researchers. Moreover, the acceptable terms sometimes shift over time, as more marginalized voices are heard. The term "transsexual" for example, has been widely used and seen as acceptable, but is now understood to be stigmatizing (APA manual). A free text easily avoids this issue. It is increasingly common among researchers to adopt these open-ended approaches to measure participant gender [e.g. @carleton_assessing_2022; @cronin_younger_2022; @dagostino_organizational_2022; @gottgens_impact_2022]. The downside of the free text response is that it makes room for hostile participants to fill in nonsense categories, such as "helicopter".

Both the initial wave and later waves of challenges to the gender binary in psychology primarily suggested ways to measures respondents’ own gender identity. This emphasis is understandable as gender identity is a commonly reported demographic variable. But gender is frequently is also frequently measured in terms of participants categorizations of others. This type of research has until now recieved less attention from feminist psychologists. The form such measurement takes is often quite similar to self-categorization, usually a forced-choice selection of two categories categories. Because self-categorization and categorization of others are different processes, however, the best measurement of self-categorization may not be the best measurement of the categorization of others. it is not immediately clear that the best way to measure self-categorization also applies to categorization of others.

## Measuring gender categoriztaion of others

Research on how people perceive and categorize the gender of others almost exclusively treats gender as a binary category. One common approach measuring people's gender categorization as a single dimension ranging from feminine to masculine (or masculine to feminine) as a one-dimensional (feminine-masculine) trait. Most of the research using this approach has investigated correlations between sucbh categorizations and ratings on other traits, including attractivenes (ref), trustworthiness (ref), and dominance (ref) *perhaps go more into details on the specifics here?*. Another common approach to measuring peoples gender categorization is have them categorize faces according to some response options decided by the participants, almost invariably "woman" and "man". Studies using this method have shown that people rapidly and automatically categorize gender [@habibi_spontaneous_2012; @jung_automaticity_2019]. This in turn indicates that gender is a salient category that determines how people evaluate others on a number of traits, such as agreeableness, dominance, etc [@stolier_neural_2017].

Moreover, participants categorize faces categorically [@campanella_categorical_2001]. This phenomenon has been observed when participants categorize a number of faces that have been morphed to vary from feminine to masculine. Categorizations of these morphed faces were accentuated towards the dominant gender of the face, so that for example a 60% female morph was rated as a woman by closer to 80% of participants  [@campanella_categorical_2001]. This categorical effect suggests that people think of gender as a strict binary consisting of women and men only. 

Measuring gender categorization as a one-dimensional or binary category does not accurately reflect the diversity of gender as it is experienced by many people (Hyde et al., 2018). Moreover, the structure of response options communicates certain ideas about gender to participants. A one-dimensional definition of gender suggests that femininity and masculinity are mutually exclusive opposites. On the other hand, two-dimensional and non-binary response options suggest the opposite, that femininity and masculinity are not mutually exclusive and that a multiplicity of genders exists.  In other words, no matter which type of response options are used, some ideas are being communicated to participants, potentially influencing their responses. Most recommendations suggest taking great care not to influence participants (Nichols & Maer, 2010), but the effects of gender response options are rarely considered.

The purpose of Study 1 was to investigate this potential influencing effect of response options by investigating whether participants responses are categorical. Categorical responses are a useful outcome to consider in this regard because it clearly suggests that participants think about the gender as consisting of only two categories: women and men. Drawing inspiration from Bem and the first wave of challenges to the gender binary in psychology, we compare gender categorization measured using one-dimensioanl response options and two-dimensional response options. If one-dimensional scales influence participants to think of gender as binary and opposites and two-dimensional scales don't do this, there should be a reduced categorical effect for two-dimensional scales. First, we will test whether categorical perception has occurred at all, and then we will see how the categorical effects compares with these two types of response options. 

However, like the early wave of challenge to the gender binary, study 1 does not capture the full diversity of gender. Moreover, given this diversity categorization of individuals as beyond the traditional binary framework is emerging as a an area of research unto itself. However, being a relatively unexplored domain, effective methodologies for measuring these categorizations are not well-established. This study aims to address this significant gap by identifying more accurate and comprehensive methods for gender categorization analysis.

Therefore, a second study - Study 2 - investigated specifically categorization using non-binary gender response options. Drawing inspiration from the second wave of challenge to the gender binary, study 2 explored how people used two types of response options that accomplish this. We used both multiple categories beyond women and men, as suggested by among others Westbrook and Saperstein and we also used a free text as suggested by Lindqvist et al. Study 2 was mainly interested in how the two non-binary options compared to each other and how the presence of non-binary options affected the categorition of binary gender. As non-binary options have been promoted by feminist and LGBTQ+ activists, their inclusion might have more generalized effects on binary categorization. Therefore, study 2 also investigated categorization of women and men.

# Study 1

Study 1 tested how gender is perceived when response options are either one-dimensional (woman and man on the same scale) or two-dimensional (woman and man on separate scales). We tested two research questions; would participants respond categorically to faces (Research Question 1) and would one-dimensional rating scale elicit stronger categorical responses than two-dimensional (Research Question 2). 

## Method

### Participants

```{r}
# Get subjects information
subs <- d %>%
  filter(condition == "md" | condition == "sd" ) %>% 
  mutate(age = as.numeric(Age_1),
         gender = substr(Gender_1, 1,1) ) %>% 
  count(id, age, gender)

```

Swedish participants (*N* = `r length(subs$id)`) completed the study in a lab at a Stockholm University campus (*M*~age~= `r mean(subs$age, na.rm = TRUE) %>% round(2)`, *SD*~age~ = `r sd(subs$age, na.rm = TRUE) %>% round(2)`, Range = `r min(subs$age, na.rm = TRUE)` - `r max(subs$age, na.rm = TRUE)`). Self-identified gender was measured using an open-ended text box (31 women, 32 men and 2 participants who did indicate gender). Participants were monetarily compensated for their time (100 sek). All participants were informed that participation was voluntary and gave written consent to participate in the study.

### Stimuli

The experiment included Black, Asian and White faces from the London Face Database [@debruine_face_2017] and the Chicago Face Database [@ma_chicago_2015] morphed with on Webmorph [@debruine_webmorph_2018]. The six most feminine faces of women and the six most masculine faces of men were selected, using the codebook provided by the researchers. The faces were matched, so that the most feminine faces in the database were morphed with the most masculine faces. The morphs were made in 7 steps, from completely feminine to completely masculine. We defined the morph level as the degree of the the female face present in the morph. In other words, a 33% was slightly tilted toward the man, a 50% face was an even mixture and a 100% consisted only of the woman's face. Because there were 18 pairs morphed in 7 steps, the total number of faces was 126.


![Example of seven step morphing spectrum](pix/stimuli.jpeg){#fig-stimuli}


## Design and procedure

The experiment used a between-participants design with two conditions. The two conditions were the *one-dimensional*,  and *two-dimensional* and conditions. Participants were randomly allocated into one of the two response options conditions. 

Participants completed the experiment on a computer in a quiet room. Each trial consisted of a face accompanied by the question "How would you gender categorize this person?". In the one-dimensional condition, participants rated gender based on a single continuum with the anchors marked "woman" and "man". In the two-dimensional condition, participants rated each face twice on two different continua, ranging from "not woman" or "not man" to "woman" or "man".  Each person completed a total of 126 trials (i.e. they categorized every face in the stimuli set).

![Sample trial from each of the three conditions](pix/exp2.png){#fig-exp2-trial}]


## Data analysis

Descriptive statistics highlight individual participants tendency toward categorical responses (Research question 1). 

Bayesian mixed-effects models were used to test categorical responses between conditions (Research Question 2). In all models, morph level and condition were included as fixed effects. Additionally, all models included varying intercepts for both participants and trials and varying slopes for facial femininity. The pattern of scores were clearly non-linear, meaning any linear model would probably be misspecified. Therefore, to reduce the complexity of the model, facial femininity was modeled as an ordered factor with seven levels, corresponding to each of the seven morphing steps. Any categorical  effects should be strongest closest to the midpoint, therefore, we compared the two conditions at morph level = 33 and 67, reporting the credible intervals of the difference as well as the Savage-Dickey Bayes factors (ref, probably wagenmakers). At morph level 50 we would expect the ratings to be 50, regardless of condition.

# Results

## Was gender percieved categorically? (Research Question 1)

To investigate whether participants categorized gender categorically we visualized responses in Figure\@ref(fig:descriptives-two). If participants respond only to the morph of faces, the lines should be a straight diagonal. Instead, Figure\@ref(fig:descriptives-two) shows that most participants display a non-linear S-shape (see the light lines) and this was indeed also the pattern of the group means (see the dark lines). However, Figure\@ref(fig:descriptives-two) also suggests that there was a high degree of individual variation, and some participants were more categorical than others in their ratings.

```{r descriptives-two, fig.cap= "Participant level and mean ratings of faces in Single dimension and multiple dimensions"}

#Visualise means using ggplot
sd <- d %>% 
  filter(condition == "md" | condition == "sd") %>% 
  mutate(fem = fem,
         categorization = as.numeric(categorization) %>% ifelse(scale == "m" | condition == "sd", 100-., .),
         scale = recode(scale, "1" = "Woman - Man", "f" = "Not Woman - Woman", "m" = "Not Man - Man"),
         condition = recode(condition, "sd" = "One dimension", "md" = "Two dimensions")) %>% 
  mutate (categorization = categorization  )%>% 
  group_by(fem, scale, condition) %>% 
  summarise(mean_rating = mean(categorization), .groups = "drop")

f <- d %>% 
  filter(condition == "md" & scale == "f") %>% 
  mutate(fem = fem,
         categorization = as.numeric(categorization) %>% ifelse(scale == "m" | condition == "sd", 100-., .),
         scale = recode(scale, "1" = "Woman - Man", "f" = "Not Woman - Woman", "m" = "Not Man - Man"),
         condition = recode(condition, "sd" = "One dimensions", "md" = "Two dimensions")) %>% 
  mutate (categorization = categorization  )%>% 
  group_by(fem, scale, condition, id) %>% 
  summarise(mean_rating = mean(categorization), .groups = "drop") 

m <- d %>% 
  filter(condition == "md"& scale == "m" | condition == "sd") %>% 
  mutate(fem = fem,
         categorization = as.numeric(categorization) %>% ifelse(scale == "m" | condition == "sd", 100-., .),
         scale = recode(scale, "1" = "Woman - Man", "f" = "Not Woman - Woman", "m" = "Not Man - Man"),
         condition = recode(condition, "sd" = "One dimension", "md" = "Two dimensions")) %>% 
  mutate (categorization = categorization  )%>% 
  group_by(fem, scale, condition, id) %>% 
  summarise(mean_rating = mean(categorization), .groups = "drop") 

ggplot(data = sd, aes(x=fem, y=mean_rating, color = condition)) +
  geom_line(aes(group = condition), linewidth = 1)+
  geom_point(aes(group = condition))+
  geom_point(data = f, 
            aes(x=fem, y=mean_rating, group = id ), alpha = 0.2)+
  geom_line(data = f, 
            aes(x=fem, y=mean_rating, group = id ), alpha = 0.2)+
  geom_point(data = m, 
            aes(x=fem, y=mean_rating,  group = id),  alpha = 0.2 )+
  geom_line(data = m, 
            aes(x=fem, y=mean_rating,  group = id),  alpha = 0.2 )+
  theme_minimal()+
  facet_wrap(~condition, ncol = 1) +
  scale_x_continuous(breaks =c(0, 17, 33, 50, 67, 83, 100)) +
  scale_y_continuous(breaks =c(0, 17, 33, 50, 67, 83, 100)) +
  ylab("Mean \"woman\" rating" ) +
  xlab("Morph level") +
  scale_color_viridis_d(option = "H", direction = 1, begin = 0.7)+
  theme_minimal() +
  theme(legend.position = "none")





```

```{r, fig.cap= "Mean rating of woman across the md and sd condition"}
#Wrangle data again
tmp <- d %>% 
  filter(condition == "sd" | condition == "md") %>% 
  mutate(f_rating = as.numeric(categorization) %>%  ifelse(scale == "f", ., 100- .),
         scale_new = ifelse(scale == "f" | scale =="m", scale, "sd"),
         fem = as.factor(fem)) 


fit_dimensional_interaction <- 
  brm(f_rating ~ 0 + fem:condition + (1 + fem|id) + (1+fem|face), family = gaussian(link = 'identity'), 
          prior = c(prior(normal(50,50), class = "b"),
                    #prior(normal(50,50), class = "Intercept"),
                    prior(exponential(1), class = "sd"),
                    prior(lkj(1), class = "cor"),
                    prior(exponential(1), class = sigma)),
          data = tmp,
          iter = 4000, warmup = 1000,
          cores = 4,
          sample_prior = TRUE,
          file = "models/fit_dimensional_stair_factor.5")





# carrying out the hypothesis test
h_dim_33 <- hypothesis(fit_dimensional_interaction, "fem33.33:conditionmd= fem33.33:conditionsd" )
h_dim_67 <- hypothesis(fit_dimensional_interaction, "fem66.67:conditionmd= fem66.67:conditionsd" )
```

## Is there a difference in categorical responses by condition? (Research Question 2)

We tested whether this accentuation effect was stronger in the one-dimension condition compared to the two-dimension condition. If two-domensional response options reduced categorical responses, ratings of femininity in the one-dimension condition should be higher at morph level 33 and lower at morph level 66 compared to the two-dimension condition.

```{r exp-two-inf, fig.cap= "Mean gender ratings in Single Dimension and Multiple Dimensions conditions"}
# Use brms to sample from posterior
c_eff <- conditional_effects(fit_dimensional_interaction) 

df <- as.data.frame(c_eff[["fem:condition"]])

ggplot(df,aes(x = fem, y=estimate__, group=condition))+
  geom_line(aes(color=condition), position = position_dodge(0.4)) +
  geom_point(aes(color=condition), position = position_dodge(0.4))+
  geom_errorbar(aes(ymin=lower__, ymax=upper__, color = condition), position = position_dodge(0.4), width = 0.3) + 
  scale_y_continuous(breaks =c(0, 17, 33, 50, 67, 83, 100)) +
  scale_color_viridis_d(name = "Condition",
                   labels = c("One dimension", "Two Dimensions"),
                   option = "H",
                   direction =1,
                   begin= 0.7)+
  ylab("Mean \"woman\" rating" ) +
  xlab("Morph level")+
  theme_minimal()
  

```

We compared the mean rating at morph levels 33.33 and 66.67 morph for both conditions. At morph level 33.33 the evidence strongly suggested that the mean "woman rating" in was the same in the Unidemensional () and Bidimensional conditions () (Mean difference = `r h_dim_33 $hypothesis$Estimate %>% round(2)`, CI =\[`r h_dim_33 $hypothesis$CI.Lower%>% round(2)`, `r h_dim_33 $hypothesis$CI.Upper %>% round(2)`\], BF~01~= `r round(h_dim_33 $hypothesis$Evid.Ratio , 2)`). This was also the case at morph level 66.67 (Mean difference = `r h_dim_67$hypothesis$Estimate %>% round(2)`, CI =\[`r h_dim_67$hypothesis$CI.Lower%>% round(2)`, `r h_dim_67$hypothesis$CI.Upper %>% round(2)`\], BF~01~= `r round(h_dim_67$hypothesis$Evid.Ratio , 2)`). Overall, both conditions showed fairly strong tendencies toward categorical responses and they did not differ in this regard. In other words, for face perception we did not find that a one-dimensional rating scale reduced the categorical effect.


## Discussion

Study 2 showed that participants responded categorically when rating faces in terms of gender. Additionally, this did not differ between option condition; one-dimensional respone option led to equally categorical responses as the two-dimensional response options. Indeed a highly binary view of gender was present and participants treated womanhood and manhood as opposites even the scale would allow them to be more flexible. However, this scale only implicitly challenged the binary, as no diverse gender optipons were present.

*Marie suggested: Any transfer to the next study.  (discuss masculinity or feminintty as that was what BEM assessed, ) *

# Study 2

Study 2 explicitly challenged the gender binary by using a wider range of response options. These were adapted from common ways to measure participants categorization of their own gender to other categorization research. Study 2 compared the standard binary response options to two alternatives: a third gender option (such as 'non-binary' or 'other') and an open text box for participants to type in their gender. An important difference between self-categorization and the categorization of others is that most people know their own gender, whereas the gender of others cannot always be known from appearance [@richards_non-binary_2016]. To account for this, we also gave participants the ability to state that gender was unknown in the free text condition.

# Method

## Participants

```{r}
# Get subjects information
subs <- d %>%
  filter(condition == "ft" | condition == "xb" | condition == "mc") %>% 
  mutate(age = as.numeric(Age_1),
         gender = substr(Gender_1, 1,1) ) %>% 
  count(id, age, gender)

```

Swedish participants (*N* = `r length(subs$id)`) completed the study in a lab at a Stockholm University campus (*M*~age~= `r mean(subs$age, na.rm = TRUE) %>% round(2)`, *SD*~age~ = `r sd(subs$age, na.rm = TRUE) %>% round(2)`, Range = `r min(subs$age, na.rm = TRUE)` - `r max(subs$age, na.rm = TRUE)`). Self-identified gender was measured using an open-ended text box as recommended by @lindqvist_what_2020 (56 women, 47 men  2 who did not indicate). All participants were informed that participation was voluntary, that they could withdraw from the study and that results do no include any identifying features. All participants provided written informed consent.

## Design, Stimuli and Procedure

The experiment used a between-participants design with three response options conditions. These were the *binary categories*,  *free text* and *multiple categories* and conditions. The administering researcher was blind to participant condition and participants were randomly allocated into one of the three response options conditions: binary categories, multiple categories, and free text (see @fig-exp1-trial). In the binary categories condition the response options consisted of two categories: "woman" and "man". In the free text condition the response options consisted of an open text box. In the multiple categories condition, the response options consisted of four categories: "woman", "man", "other" and "I don't know". The stimuli were identical to those of Study 1. After being allocated to one of the three conditions, participants categorized 126 faces according to the response options in their condition. 

![Sample trial from each of the three conditions](pix/exp1.png){#fig-exp1-trial}


## Measures

The outcome was responses to the categorization task. For analysis purposes, these were aggregated in the following ways:

*Beyond-binary categorizations* represented the categories where participants did not categorize the face as woman or man. In the multiple categories conditions, it was computed by summing the  “I don’t know” and “other”. In the free text condition, it was computed by summint variations of “other” and “non-binary”. The beyond-binary responses were coded as 1 and binary responses as 0. In the free text condition, this included various variations of "other" and "non-binary". The beyond-binary responses were coded as 1 and binary responses as 0.

*Binary categorization* represented only the responses that were either woman (coded as 1) or man (coded as 0). All other responses were removed from this dataset (this meant removing a total of XX responses from X participants).

## Data analysis

We used `r cite_r("r-references.bib", pkgs = c("brms", "tidyverse", "papaja"), withhold = FALSE)`. Additionally, much of the R code was adapted from @kurz_doing_2023 . Descriptive statistics were used to summarize the data, and Bayesian mixed-effects models were used to test research questions 2. In all models, facial femininity and condition were included as fixed effects. Additionally, all models included varying intercepts for both participants and trials and varying slopes for facial femininity. To answer each research question, we used a two-step approach which began with a model comparison approach followed by Bayes factor tests of specific contrasts.

# Results

## How did inclusive response options affect categorizations beyond the binary (Research Question 3)

The raw distribution of gender categorizations made by participants is presented in Figure\ \@ref(fig:descriptives-1).

```{r descriptives-1, fig.cap= "Gender Categorizations by Participants"}

# make figure 1
d %>%
  mutate(fem = fem ) %>% 
  filter(condition == "ft" | condition == "xb" | condition == "mc") %>% #select correct conditions
  filter(id != 124) %>% #misunderstood the task, categorized by race
  group_by(fem, race, condition) %>% 
  mutate(categorization = recode(categorization,  #yes, this is pretty horrendous code, I haven't had a chance to sit down and clean it up yet.
                                 "1" = "Woman", "Woman" = "Woman", "wman" = "Woman", "woman" = "Woman", "female" = "Woman", "Female " = "Woman", "Female"= "Woman", "Fenale"= "Woman", "women" = "Woman", "woman " = "Woman", "femLE" = "Woman", "FEmale" = "Woman", "Femalw" = "Woman", "Fwmalw" = "Woman", "Female " = "Woman", "woman" = "Woman", "Woman" = "Woman", "feMale" = "Woman", "fermale" = "Woman", "wman" = "Woman", "Femae" = "Woman", "f" = "Woman", "F"= "Woman", "female " = "Woman",
                                 "2" = "Man", "man" = "Man","Male" = "Man", "male" = "Man", " Male" = "Man", "M" = "Man", "nmale" = "Man", "male " = "Man", "nale" = "Man", "ale" = "Man", "M" = "Man",  "m" = "Man", "MALE" = "Man",
                                 "3" = "Other", "Nonbinary" = "Other", "Non Binary " = "Other", "Non binary " = "Other",  "nonbinary" = "Other", 
                                 "4" = "Don't know" ),
         condition = recode(condition, "ft" = "Free text", "xb" = "Binary Categories", "mc" = "Multiple Categories"))%>% 
  count(categorization) %>% 
  filter(!is.na(categorization))%>% 
  ggplot(aes(x=fem, y=n, fill=factor(categorization, levels = c("Man", "Other", "Don't know", "Woman")))) +
  geom_bar(stat="identity", position = "fill") + 
  ggtitle("Gender Categorizations by Participants")+ 
  facet_wrap(~condition) + 
  scale_x_continuous(breaks =c(0, 17, 33, 50, 66, 83, 100)) +
  scale_y_continuous(breaks =c(0, 0.17, 0.33, 0.50, 0.66, 0.83, 1)) +
  ylab("Proportion of responses" ) +
  xlab("Morph level") +
  #scale_fill_discrete(name = "Response") +
  #scale_fill_viridis_d(name = "Response")
  scale_fill_manual( values = c("#D2B48C", "#FF5733", "#3498DB", "#FFDD88"))+
  guides(fill = guide_legend(title = "Categorization"))+
  geom_hline(yintercept=0.50, linetype="dashed", color = "darkgrey")+
  theme_minimal()

```



We investigated whether participants categorized faces beyond the binary when given the option to do so (Research Question 3). To do this, we plotted the distribution of categorizations for each participant (see Figure\@ref(fig:descriptives-1)).

Even when participants had the option to categorize face beyond the binary, most still categorized faces as women and men. In the free text condition, only two participants categorized a single face as other than woman and man. In the multiple categories condition, around a third of participants categorized any face beyond the binary see figure XX. Even among participants who categorized any faces beyond the binary, there was a great deal of variation in tendency to use these categories (see Figure\@ref(fig:descriptives-1).)






```{r, include=FALSE}
#create dataframe with only free text and multiple categories conditions 
#Well, fist, first I wrangle data
tmp <- d %>% 
  filter(condition == "mc" | condition == "ft") %>% 
  mutate(categorization = recode(categorization,  #yes, this is pretty horrendous code, I haven't had a chance to sit down and clean it up yet.
                                 "1" = "Woman", "Woman" = "Woman", "wman" = "Woman", "woman" = "Woman", "female" = "Woman", "Female " = "Woman", "Female"= "Woman", "Fenale"= "Woman", "women" = "Woman", "woman " = "Woman", "femLE" = "Woman", "FEmale" = "Woman", "Femalw" = "Woman", "Fwmalw" = "Woman", "Female " = "Woman", "woman" = "Woman", "Woman" = "Woman", "feMale" = "Woman", "fermale" = "Woman", "wman" = "Woman", "Femae" = "Woman", "f" = "Woman", "F"= "Woman", "female " = "Woman",
                                 "2" = "Man", "man" = "Man","Male" = "Man", "male" = "Man", " Male" = "Man", "M" = "Man", "nmale" = "Man", "male " = "Man", "nale" = "Man", "ale" = "Man", "M" = "Man",  "m" = "Man", "MALE" = "Man",
                                 "3" = "Other", "Nonbinary" = "Other", "Non Binary " = "Other", "Non binary " = "Other",  "nonbinary" = "Other", "Non binary" = "Other", "non binary" = "Other", "unisex" = "other", 
                                 "4" = "Don't know" ) )%>% 
  mutate(bbcat = ifelse(categorization == "Other"|categorization == "Don't Know", 1, 0),
         fem = as.factor(fem))
```

*I've cleaned up the figure and I've added a table. Obviously, the table needs some cleaning, but maybe it does the job? These contain the exact same information now*

```{r, message=FALSE, error=FALSE}
tmp %>% group_by(id, condition) %>% 
  #filter(condition == "mc") %>% 
  summarise(sum_bbcat = sum(bbcat  ==1)) %>% 
  arrange(sum_bbcat)%>% 
  #mutate(id = seq_len(n())) %>% 
  ggplot(aes(x = condition, y = sum_bbcat))+
  geom_dotplot(binaxis = "y",binwidth = 1, stackdir = "center", dotsize = 0.8, stackratio =1) +
  scale_y_continuous(name = "N Beyond-Binary categorizations")+
  #coord_flip()+
  theme_classic()

# tmp %>% group_by(id, condition) %>% 
#   #filter(condition == "mc") %>% 
#   summarise(sum_bbcat = sum(bbcat  ==1)) %>% 
#   arrange(sum_bbcat)%>% 
#   #mutate(id = seq_len(n())) %>% 
#   ggplot(aes(x = condition, y = sum_bbcat))+
#   geom_jitter(width = 0.02, alpha = 0.5, size = 2)+
#   scale_y_continuous(name = "N Beyond-Binary categorizations")+
#   #coord_flip()+
#   theme_classic()
```

```{r}
# library(gridExtra)
#  
#  mc_cols <- tmp %>% group_by(id) %>% 
#    filter(condition == "mc") %>% 
#    summarise(sum_bbcat = sum(bbcat  ==1)) %>% 
#    arrange(sum_bbcat)%>% 
#    mutate(id = seq_len(n())) %>% 
#    ggplot(aes(x = id, y = sum_bbcat))+
#    geom_col(position = "identity") +
#    scale_y_continuous(name = "N Categorization", limits = c(0,30))+
#    coord_flip()+
#    theme_classic()
#  
#  ft_cols <- tmp %>% group_by(id) %>% 
#    filter(condition == "ft") %>% 
#    summarise(sum_bbcat = sum(bbcat == 1)) %>% 
#    arrange(sum_bbcat)%>% 
#    mutate(id = seq_len(n())) %>% 
#    ggplot(aes(x = id, y = sum_bbcat))+
#    geom_col(position = "identity") +
#    scale_y_continuous( name = "N categorization", limits = c(0,30))+
#    coord_flip()+
#    theme_classic()
# 
# grid.arrange(ft_cols, mc_cols, ncol = 2)

 two <- tmp %>% group_by(id, condition) %>% 
   #filter(condition == "mc") %>% 
   summarise(sum_bbcat = sum(bbcat  ==1)) %>% 
  mutate(condition = recode(condition, "ft" = "Free text", "mc" = "Multiple Categories"))

library(kableExtra) 

 table(two$condition, two$sum_bbcat) %>% kable
```


```{r}
#Fit models using brms.
#Can be run with premade file to save time. To reproduce in full, comment out the "file" argument
Null <- brm(bbcat ~ 1  + (1 |id) + (1|face:fem), family = bernoulli(link = 'logit'), 
          prior = c(prior(normal(0,3), class = "Intercept"), # weakly regularizing priors
                    prior(cauchy(0,3), class = "sd")
                    ),
          data = tmp,
          iter = 6000, warmup = 2000,
          chains = 4,
          cores = 4,
          sample_prior = TRUE,
          file = "models/binary_null"
          )

#Fitting the main effects model
Main_Effect <- brm(bbcat ~ 0 + condition + fem  + (1 |id) + (1|face:fem), family = bernoulli(link = 'logit'), 
          prior = c(prior(normal(0,3), class = "b", coef = "conditionmc"), #again, weakly regularizing priors
                    prior(normal(0,3), class = "b", coef = "conditionft"),
                    prior(cauchy(0,3), class = "sd")
                    ),
          data = tmp,
          iter = 4000, warmup = 1000,
          chains = 4,
          cores = 4,
          sample_prior = TRUE,
          file = "models/binary_mfx"
          )

#fitting the interaction model
Interaction <- brm(bbcat ~ 0 + condition:fem  + (1 |id) + (1|face:fem), family = bernoulli(link = 'logit'), 
         prior = c(prior(normal(-3,3), class = "b"),
                   prior(cauchy(0,3), class = "sd")),
          data = tmp,
          iter = 6000, warmup = 2000,
          chains = 4,
          cores = 4,
          sample_prior = TRUE,
          file = "models/binary_int.6"
          )

```


```{r}
Particiapnt <- brm(bbcat ~ 1+ condition (1+ condition |id) + (1+condition|face:fem), family = bernoulli(link = 'logit'), 
         prior = c(prior(normal(-3,3), class = "Intercept"),
                   prior(cauchy(0,3), class = "sd")),
          data = tmp,
          iter = 6000, warmup = 2000,
          chains = 4,
          cores = 4,
          sample_prior = TRUE,
          file = "models/p_effect"
          )

Overall_model <- brm(bbcat ~ 1+ condition+ (1+ condition |id) + (1+condition|face:fem), family = bernoulli(link = 'logit'), 
         prior = c(prior(normal(-8,5), class = "Intercept"),
                   prior(normal(0, 3), class = "b"),
                   prior(cauchy(0,3), class = "sd")),
          data = tmp,
          iter = 6000, warmup = 2000,
          chains = 4,
          cores = 4,
          sample_prior = TRUE,
          file = "models/overall.3"
          )

Particiapnte <- brm(bbcat ~ 1+ (1 |id:condition) + (1|face:fem), 
                    family = bernoulli(link = 'logit'), 
                    prior = c(prior(normal(-3,3), class = "Intercept"),
                              prior(cauchy(0,3), class = "sd")),
          data = tmp,
          iter = 6000, warmup = 2000,
          chains = 4,
          cores = 4,
          sample_prior = TRUE,
          file = "models/p_effect2"
          )
person_pars <- ranef(Interaction)
```


```{r, include = FALSE}
# ft <-  person_pars[["id"]] %>% as.data.frame() %>% rownames_to_column() %>% 
#   separate(col = rowname, into = c("id", "condition") ) %>% 
#   filter(condition == "ft") %>% 
#   arrange(Estimate.Intercept) %>%
#   mutate(id = seq_len(n())) %>%
#   ggplot(aes(id, Estimate.Intercept, ymin = Q2.5.Intercept, ymax = Q97.5.Intercept)) +
#   geom_pointrange(alpha = 0.7) +
#   coord_flip() +
#   labs(x = "Person Number (Sorted)" )+
#   facet_wrap(~condition) + 
#   theme_classic()
# 
# person_pars[["id"]] %>% as.data.frame() %>% rownames_to_column() %>% 
#   separate(col = rowname, into = c("id", "condition") ) %>% 
#   #filter(condition == "mc") %>% 
#   arrange(Estimate.Intercept) %>%
#   mutate(id = seq_len(n())) %>%
#   ggplot(aes(id, Estimate.Intercept, ymin = Q2.5.Intercept, ymax = Q97.5.Intercept)) +
#   geom_pointrange(alpha = 0.7) +
#   coord_flip() +
#   labs(x = "Person Number (Sorted)")+
#  # facet_wrap(~condition) + 
#   theme_classic()
```

```{r, include=FALSE}
#ft <-  person_pars[["id:condition"]] %>% as.data.frame() %>% rownames_to_column() %>% 
 # separate(col = rowname, into = c("id", "condition") ) %>% 
  #filter(condition == "ft") %>% 
  #arrange(Estimate.Intercept) %>%
  #mutate(id = seq_len(n())) %>%
  #ggplot(aes(id, Estimate.Intercept, ymin = Q2.5.Intercept, ymax = Q97.5.Intercept)) +
  #geom_pointrange(alpha = 0.7) +
  #coord_flip() +
  #labs(x = "Person Number (Sorted)" )+
  #facet_wrap(~condition) + 
  #theme_classic()

#mc <-  person_pars[["id:condition"]] %>% as.data.frame() %>% rownames_to_column() %>% 
 # separate(col = rowname, into = c("id", "condition") ) %>% 
  #filter(condition == "mc") %>% 
  #arrange(Estimate.Intercept) %>%
#  mutate(id = seq_len(n())) %>%
 # ggplot(aes(id, Estimate.Intercept, ymin = Q2.5.Intercept, ymax = Q97.5.Intercept)) +
#  geom_pointrange(alpha = 0.7) +
 # coord_flip() +
 # labs(x = "Person Number (Sorted)")+
#  facet_wrap(~condition) + 
 # theme_classic()
```

# ```{r descriptives, fig.cap= "Gender Categorizations by Participants"}
# library(gridExtra)
# grid.arrange(ft, mc, ncol = 2) 
# ```




## Categorization of women and men (Research Question 4)

When people categorize faces beyond the binary such categorization also affects the categorization of faces as men or women. For example, does categorization of faces as non-binary systematically replace "woman" categorization. As non-binary options have been promoted by feminist and LGBTQ+ activists, their inclusion might have more generalized effects on binary categorization. We therefore investigated inclusive response options changed participants overall tendency to categorize women and men. Descriptive statistics for individual level responses are displayed in figure X

```{r descriptives-prep, fig.cap= "Gender Categorizations by Participants"}

# make figure 1
ft <-d %>%
  mutate(id = factor(id) ) %>% 
  filter(condition == "ft") %>% #select correct conditions
  group_by(  id) %>% 
  mutate(categorization = recode(categorization,  #yes, this is pretty horrendous code, I haven't had a chance to sit down and clean it up yet.
                                 "1" = "Woman", "Woman" = "Woman", "wman" = "Woman", "woman" = "Woman", "female" = "Woman", "Female " = "Woman", "Female"= "Woman", "Fenale"= "Woman", "women" = "Woman", "woman " = "Woman", "femLE" = "Woman", "FEmale" = "Woman", "Femalw" = "Woman", "Fwmalw" = "Woman", "Female " = "Woman", "woman" = "Woman", "Woman" = "Woman", "feMale" = "Woman", "fermale" = "Woman", "wman" = "Woman", "Femae" = "Woman", "f" = "Woman", "F"= "Woman", "female " = "Woman",
                                 "2" = "Man", "man" = "Man","Male" = "Man", "male" = "Man", " Male" = "Man", "M" = "Man", "nmale" = "Man", "male " = "Man", "nale" = "Man", "ale" = "Man", "M" = "Man",  "m" = "Man", "MALE" = "Man",
                                 "3" = "Other", "Nonbinary" = "Other", "Non Binary " = "Other", "Non binary " = "Other",  "nonbinary" = "Other", "Non binary" = "Other", "non binary" = "Other", "unisex" = "other", 
                                 "4" = "Don't know" ),
         condition = recode(condition, "ft" = "Free text", "xb" = "Binary Categories", "mc" = "Multiple Categories"))%>% 
  filter(id != 124) %>% 
  filter(categorization == "Woman" |categorization == "Man") %>% 
  count(categorization) %>% 
 # arrange(n) %>% 
  group_by(categorization) %>% 
  filter(!is.na(categorization)) %>% 
  arrange(categorization, desc(n)) %>%
  mutate(id = factor(id, levels = unique(id))) %>% 
  ggplot(aes(x=id, y=n, fill=factor(categorization, levels = c("Man", "Other", "Don't know", "Woman")))) +
  geom_bar(stat="identity", position = "fill") + 
 #ggtitle("Gender Categorizations by Participants")+
  #scale_x_continuous(breaks =c(0, 17, 33, 50, 66, 83, 100)) +
  ylab("Proportion of responses" ) +
  xlab("") +
  #scale_fill_discrete(name = "Response") +
  #scale_fill_viridis_d(name = "Response")
  #scale_fill_grey( name = "Response")+
  coord_flip()+
  theme_minimal()+
  ggtitle("Free text")+
  theme(legend.position = "none")

mc  <-d %>%
  mutate(id = factor(id) ) %>% 
  filter(condition == "mc") %>% #select correct conditions
  group_by(  id) %>% 
  mutate(categorization = recode(categorization,  #yes, this is pretty horrendous code, I haven't had a chance to sit down and clean it up yet.
                                 "1" = "Woman", "Woman" = "Woman", "wman" = "Woman", "woman" = "Woman", "female" = "Woman", "Female " = "Woman", "Female"= "Woman", "Fenale"= "Woman", "women" = "Woman", "woman " = "Woman", "femLE" = "Woman", "FEmale" = "Woman", "Femalw" = "Woman", "Fwmalw" = "Woman", "Female " = "Woman", "woman" = "Woman", "Woman" = "Woman", "feMale" = "Woman", "fermale" = "Woman", "wman" = "Woman", "Femae" = "Woman", "f" = "Woman", "F"= "Woman", "female " = "Woman",
                                 "2" = "Man", "man" = "Man","Male" = "Man", "male" = "Man", " Male" = "Man", "M" = "Man", "nmale" = "Man", "male " = "Man", "nale" = "Man", "ale" = "Man", "M" = "Man",  "m" = "Man", "MALE" = "Man"),
         condition = recode(condition, "ft" = "Free text", "xb" = "Binary Categories", "mc" = "Multiple Categories"))%>% 
  filter(id != 124 | 84) %>% 
  filter(categorization == "Woman" |categorization == "Man") %>% 
  count(categorization) %>% 
 # arrange(n) %>% 
  group_by(categorization) %>% 
  filter(!is.na(categorization)) %>% 
  arrange(categorization, desc(n)) %>%
  mutate(id = factor(id, levels = unique(id))) %>% 
  ggplot(aes(x=id, y=n, fill=factor(categorization, levels = c("Man", "Other", "Don't know", "Woman")))) +
  geom_bar(stat="identity", position = "fill") + 
 #ggtitle("Gender Categorizations by Participants")+
  #scale_x_continuous(breaks =c(0, 17, 33, 50, 66, 83, 100)) +
  ylab("Proportion of responses" ) +
  xlab("") +
  #scale_fill_discrete(name = "Response") +
  #scale_fill_viridis_d(name = "Response")
  #scale_fill_grey( name = "Response")+
  coord_flip()+
  ggtitle("Multiple categories")+
  theme_minimal()+
  theme(legend.position = "none")


xb <-d %>%
  mutate(id = factor(id) ) %>% 
  filter(condition == "xb") %>% #select correct conditions
  group_by(  id) %>% 
  mutate(categorization = recode(categorization,  #yes, this is pretty horrendous code, I haven't had a chance to sit down and clean it up yet.
                                 "1" = "Woman", "Woman" = "Woman", "wman" = "Woman", "woman" = "Woman", "female" = "Woman", "Female " = "Woman", "Female"= "Woman", "Fenale"= "Woman", "women" = "Woman", "woman " = "Woman", "femLE" = "Woman", "FEmale" = "Woman", "Femalw" = "Woman", "Fwmalw" = "Woman", "Female " = "Woman", "woman" = "Woman", "Woman" = "Woman", "feMale" = "Woman", "fermale" = "Woman", "wman" = "Woman", "Femae" = "Woman", "f" = "Woman", "F"= "Woman", "female " = "Woman",
                                 "2" = "Man", "man" = "Man","Male" = "Man", "male" = "Man", " Male" = "Man", "M" = "Man", "nmale" = "Man", "male " = "Man", "nale" = "Man", "ale" = "Man", "M" = "Man",  "m" = "Man", "MALE" = "Man",
                                 "3" = "Other", "Nonbinary" = "Other", "Non Binary " = "Other", "Non binary " = "Other",  "nonbinary" = "Other", "Non binary" = "Other", "non binary" = "Other", "unisex" = "other", 
                                 "4" = "Don't know" ),
         condition = recode(condition, "ft" = "Free text", "xb" = "Binary Categories", "mc" = "Multiple Categories"))%>% 
  filter(id != 124 | id !=84) %>% 
  count(categorization) %>% 
 # arrange(n) %>% 
  group_by(categorization) %>% 
  filter(!is.na(categorization)) %>% 
  arrange(categorization, desc(n)) %>%
  mutate(id = factor(id, levels = unique(id))) %>% 
  ggplot(aes(x=id, y=n, fill=factor(categorization, levels = c("Man", "Other", "Don't know", "Woman")))) +
  geom_bar(stat="identity", position = "fill") + 
 #ggtitle("Gender Categorizations by Participants")+
  #scale_x_continuous(breaks =c(0, 17, 33, 50, 66, 83, 100)) +
  ylab("Proportion of responses" ) +
  xlab("id") +
  #scale_fill_discrete(name = "Response") +
  #scale_fill_viridis_d(name = "Response")
  #scale_fill_grey( name = "Response")+
  coord_flip()+
  ggtitle("Binary Categories")+
  theme_minimal()+
  theme(legend.position = "none")
```

```{r descriptives-ft-prep, fig.cap= "Gender Categorizations by Participants"}

# make figure 1
ft <- d %>%
  mutate(id = factor(id) ) %>% 
  filter(condition == "ft") %>% #select correct conditions
  group_by(  id) %>% 
  mutate(categorization = recode(categorization,  #yes, this is pretty horrendous code, I haven't had a chance to sit down and clean it up yet.
                                 "1" = "Woman", "Woman" = "Woman", "wman" = "Woman", "woman" = "Woman", "female" = "Woman", "Female " = "Woman", "Female"= "Woman", "Fenale"= "Woman", "women" = "Woman", "woman " = "Woman", "femLE" = "Woman", "FEmale" = "Woman", "Femalw" = "Woman", "Fwmalw" = "Woman", "Female " = "Woman", "woman" = "Woman", "Woman" = "Woman", "feMale" = "Woman", "fermale" = "Woman", "wman" = "Woman", "Femae" = "Woman", "f" = "Woman", "F"= "Woman", "female " = "Woman",
                                 "2" = "Man", "man" = "Man","Male" = "Man", "male" = "Man", " Male" = "Man", "M" = "Man", "nmale" = "Man", "male " = "Man", "nale" = "Man", "ale" = "Man", "M" = "Man",  "m" = "Man", "MALE" = "Man",
                                 "3" = "Other", "Nonbinary" = "Other", "Non Binary " = "Other", "Non binary " = "Other",  "nonbinary" = "Other", "Non binary" = "Other", "non binary" = "Other", "unisex" = "other", 
                                 "4" = "Don't know" ),
         condition = recode(condition, "ft" = "Free text", "xb" = "Binary Categories", "mc" = "Multiple Categories"))%>% 
  filter(id != 124) %>% 
  filter(categorization == "Woman" |categorization == "Man") %>% 
  count(categorization) %>% 
 # arrange(n) %>% 
  filter(!is.na(categorization)) %>% 
  mutate(Categorization =factor(categorization, levels = c("Woman", "Man")))

summarized_data <- ft %>%
  group_by(id) %>%
  summarize(total = sum(n))

# Merging summarized data back with the original data
ft <- merge(ft, summarized_data, by = "id") %>% 
  mutate(prop = n/total) %>% 
   # group_by(categorization) %>% 
  arrange(Categorization, desc(prop)) %>% 
  mutate(id = factor(id, levels = unique(id))) %>% 
  ggplot(aes(x=id, y=n, fill=Categorization)) +
  geom_bar(stat="identity", position = "fill") + 
 #ggtitle("Gender Categorizations by Participants")+
  #scale_x_continuous(breaks =c(0, 17, 33, 50, 66, 83, 100)) +
 # ylab("Proportion of responses" ) +
  xlab("") +
  scale_fill_manual( values = c("#D2B48C",  "#FFDD88"))+

  #scale_fill_discrete(name = "Response") +
  #scale_fill_viridis_d(name = "Response")
  #scale_fill_grey( name = "Response")+
  coord_flip()+
  theme_minimal()+
  ggtitle("Free text")
```


```{r descriptives-mc-prep, fig.cap= "Gender Categorizations by Participants"}
mc <- d %>%
  mutate(id = factor(id) ) %>% 
  filter(condition == "mc") %>% #select correct conditions
  group_by(  id) %>% 
  mutate(categorization = recode(categorization,  #yes, this is pretty horrendous code, I haven't had a chance to sit down and clean it up yet.
                                 "1" = "Woman", "Woman" = "Woman", "wman" = "Woman", "woman" = "Woman", "female" = "Woman", "Female " = "Woman", "Female"= "Woman", "Fenale"= "Woman", "women" = "Woman", "woman " = "Woman", "femLE" = "Woman", "FEmale" = "Woman", "Femalw" = "Woman", "Fwmalw" = "Woman", "Female " = "Woman", "woman" = "Woman", "Woman" = "Woman", "feMale" = "Woman", "fermale" = "Woman", "wman" = "Woman", "Femae" = "Woman", "f" = "Woman", "F"= "Woman", "female " = "Woman",
                                 "2" = "Man", "man" = "Man","Male" = "Man", "male" = "Man", " Male" = "Man", "M" = "Man", "nmale" = "Man", "male " = "Man", "nale" = "Man", "ale" = "Man", "M" = "Man",  "m" = "Man", "MALE" = "Man"),
         condition = recode(condition, "ft" = "Free text", "xb" = "Binary Categories", "mc" = "Multiple Categories"))%>% 
  filter(id != 124 | 84) %>% 
  filter(categorization == "Woman" |categorization == "Man") %>% 
  count(categorization) %>% 
 # arrange(n) %>% 
  group_by(categorization) %>% 
  filter(!is.na(categorization))%>% 
  mutate(Categorization =factor(categorization, levels = c("Woman", "Man")))



summarized_data <- mc %>%
  group_by(id) %>%
  summarize(total = sum(n))

# Merging summarized data back with the original data
mc  <- merge(mc, summarized_data, by = "id") %>% 
  mutate(prop = n/total) %>% 
   arrange(Categorization, desc(prop)) %>% 
  mutate(id = factor(id, levels = unique(id))) %>% 
  ggplot(aes(x=id, y=n, fill=Categorization)) +
  geom_bar(stat="identity", position = "fill") + 
 #ggtitle("Gender Categorizations by Participants")+
  #scale_x_continuous(breaks =c(0, 17, 33, 50, 66, 83, 100)) +
 # ylab("Proportion of responses" ) +
  xlab("") +
  scale_fill_manual( values = c("#D2B48C",  "#FFDD88"))+

  #scale_fill_discrete(name = "Response") +
  #scale_fill_viridis_d(name = "Response")
  #scale_fill_grey( name = "Response")+
  coord_flip()+
  theme_minimal()+
  ggtitle("Multiple Catgories")
```


```{r descriptives-xb-prep, fig.cap= "Gender Categorizations by Participants"}
xb <- d %>%
  mutate(id = factor(id) ) %>% 
  filter(condition == "xb") %>% #select correct conditions
  group_by(  id) %>% 
  mutate(categorization = recode(categorization,  #yes, this is pretty horrendous code, I haven't had a chance to sit down and clean it up yet.
                                 "1" = "Woman", "Woman" = "Woman", "wman" = "Woman", "woman" = "Woman", "female" = "Woman", "Female " = "Woman", "Female"= "Woman", "Fenale"= "Woman", "women" = "Woman", "woman " = "Woman", "femLE" = "Woman", "FEmale" = "Woman", "Femalw" = "Woman", "Fwmalw" = "Woman", "Female " = "Woman", "woman" = "Woman", "Woman" = "Woman", "feMale" = "Woman", "fermale" = "Woman", "wman" = "Woman", "Femae" = "Woman", "f" = "Woman", "F"= "Woman", "female " = "Woman",
                                 "2" = "Man", "man" = "Man","Male" = "Man", "male" = "Man", " Male" = "Man", "M" = "Man", "nmale" = "Man", "male " = "Man", "nale" = "Man", "ale" = "Man", "M" = "Man",  "m" = "Man", "MALE" = "Man",
                                 "3" = "Other", "Nonbinary" = "Other", "Non Binary " = "Other", "Non binary " = "Other",  "nonbinary" = "Other", "Non binary" = "Other", "non binary" = "Other", "unisex" = "other", 
                                 "4" = "Don't know" ),
         condition = recode(condition, "ft" = "Free text", "xb" = "Binary Categories", "mc" = "Multiple Categories"))%>% 
  filter(id != 124 | id !=84) %>% 
  count(categorization) %>% 
 # arrange(n) %>% 
  group_by(categorization) %>% 
  filter(!is.na(categorization)) %>% 
  mutate(Categorization =factor(categorization, levels = c("Woman", "Man")))



summarized_data <- xb %>%
  group_by(id) %>%
  summarize(total = sum(n))

# Merging summarized data back with the original data
xb  <- merge(xb, summarized_data, by = "id") %>% 
  mutate(prop = n/total) %>% 
   arrange(Categorization, desc(prop)) %>% 
  mutate(id = factor(id, levels = unique(id))) %>% 
  ggplot(aes(x=id, y=n, fill=Categorization)) +
  geom_bar(stat="identity", position = "fill") + 
 #ggtitle("Gender Categorizations by Participants")+
  #scale_x_continuous(breaks =c(0, 17, 33, 50, 66, 83, 100)) +
  #ylab("Proportion of responses" ) +
  xlab("id") +
  scale_fill_manual( values = c("#D2B48C",  "#FFDD88"))+

  #scale_fill_discrete(name = "Response") +
  #scale_fill_viridis_d(name = "Response")
  #scale_fill_grey( name = "Response")+
  coord_flip()+
  theme_minimal()+
  ggtitle("Binary Catgories")
```


```{r descriptivesx, fig.cap= "Binary Gender Categorizations by Participants in the three conditions (non-binary responses were excluded) "}
library(ggpubr)
ggarrange(xb, ft, mc, ncol = 3, common.legend = TRUE, legend="right", label.x = "Proportion of responses", label.y = "ID")
```


This was tested by fitting a Bayesian mixed effects model to the data. In addition to random intercepts for participants and random slopes for facial femininity, the model included a fixed effect of condition, and unique slopes of facial femininity for each condition (see supplementary material). 

```{r, rq2-modelling 3, message=FALSE}
#remove the beyond binary responses
tmp <- d %>% 
  filter(condition == "mc"| condition == "xb"|condition == "ft" )%>% 
  mutate(categorization = recode(categorization, 
                                 "F" = "f", "kvinna" = "f", "female" = "f", "female " = "f", "Female"= "f", "Fenale"= "f", "women" = "f", "woman " = "f", "femLE" = "f", "FEmale" = "f", "Femalw" = "f", "Fwmalw" = "f", "Female " = "f", "woman" = "f", "Woman" = "f", "feMale" = "f", "fermale" = "f", "wman" = "f", "Femae" = "f",
                                 "man" = "m","Male " = "m", "make" = "m", "Male"= "m", "male" = "m", "man " = "m",  "male " = "m", "guy" = "m", "boy" = "m", "Make" = "m", "M"  = "m", "Man" = "m", "Bottom half male; above nose female., Would have to say Male" = "m", " male" = "m", "male  " = "m", "ale" = "m", "nmale" = "m", "MALE"= "m", "nale"= "m", " Male" = "m",
                                 "Nonbinary" = "o", "Non Binary " = "o", "Unsure" = "o", "Non binary " = "o", "good" = "o", "Neutral" = "o", "neutral" = "o", "nonbinary" = "o", "bigender" = "o", "hen" = "o", "don't know"  = "o", 
                                 "1" = "f", "2" = "m")) %>% 
  mutate(f_cat = ifelse(categorization == "f"|categorization == "m", categorization, NA)) %>% 
  mutate(f_cat =as.numeric( f_cat == "f"))

#Start fitting the null model
Null <- brm(f_cat ~ 1  + (1 + fem |id) + (1|face:fem), family = bernoulli(link = 'logit'), 
          prior = c(prior(normal(0,3), class = "Intercept"),
                    prior(exponential(2), class = "sd")
                    ),
          data = tmp,
          iter = 6000, warmup = 2000,
          chains = 4,
          cores = 4,
          sample_prior = TRUE,
          file = "models/fit_mf_null.1"
          )


#Main effects model
main_effects <- brm(f_cat ~ 0 + condition + fem  + (1 |id) + (1|face:fem), family = bernoulli(link = 'logit'), 
          prior = c(prior(normal(0,3), class = "b"),
                    prior(cauchy(0,3), class = "sd")),
          data = tmp,
          iter = 4000, warmup = 1000,
          chains = 4,
          cores = 4,
          sample_prior = TRUE,
          file = "models/mainfx.2"
          )

tmp$fem_s = tmp$fem - 50
tmp$cond <- factor(tmp$condition, levels = c("xb", "ft", "mc"))
#Lastly the interaction model
interaction <- brm(f_cat ~ 0 + condition * condition:fem_s  + (1 + fem_s |id) + (1 + fem_s |face), family = bernoulli(link = 'logit'), 
         prior = c(prior(normal(0,3), class = "b"),
                   prior(cauchy(0,3), class = "sd")),
          data = tmp,
          iter = 6000, warmup = 2000,
          chains = 4,
          cores = 4,
          sample_prior = TRUE,
          file = "models/fit_mf_int.6"
          )

```



```{r hypos 2}

#Test contrasts
h0 <- hypothesis(interaction, "conditionxb = conditionmc")
h1 <- hypothesis(interaction, "conditionxb = conditionft")

h2 <- hypothesis(interaction, "conditionxb:fem_s = conditionmc:fem_s")
h3 <- hypothesis(interaction, "conditionxb:fem_s = conditionft:fem_s")


```




We treated the binary categories condition as a neutral baseline and which the other two condoitions were tested against. The comparison of the multiple categories condition and the binary categories condition, indicated moderate evidence that gender categorization in the two conditions were the same (OR = `r exp(h0$hypothesis$Estimate) %>% round(2)`, CI =\[`r exp(h0$hypothesis$CI.Lower)%>% round(2)`, `r exp(h0$hypothesis$CI.Upper )%>% round(2)`\], BF~01~= `r round(h0$hypothesis$Evid.Ratio , 2)`). The comparison of the free text and binary categories conditions indicated strong evidence that the two conditions were the same  (OR = `r exp(h1$hypothesis$Estimate) %>% round(2)`, CI =\[`r exp(h1$hypothesis$CI.Lower)%>% round(2)`, `r exp(h1$hypothesis$CI.Upper) %>% round(2)`\], BF~01~= `r round(h1$hypothesis$Evid.Ratio , 2)`). In other words, neither the free text or the multiple categories condition changed the pattern of categorization of women and men compared to the binary categories condition.

We also compared the relationship between facial femininity and woman categorizations (i.e. the slope of facial femininity) across the conditions. The effect of facial femininity on woman categorizations was almost exactly the same in the multiple categories and binary categories, as there was overwhelming evidence in favor of no difference (Difference = `r h2$hypothesis$Estimate %>% round(2)`, CI =\[`r h2$hypothesis$CI.Lower%>% round(2)`, `r h2$hypothesis$CI.Upper %>% round(2)`\], BF~01~= `r round(h3 $hypothesis$Evid.Ratio , 2)`). The effect of facial femininity on woman categorizations almost was exactly the same in the free text and binary categories, as there was overwhelming evidence in favor of no difference ((Difference = `r h3$hypothesis$Estimate %>% round(2)`, CI =\[`r h3$hypothesis$CI.Lower%>% round(2)`, `r h3$hypothesis$CI.Upper %>% round(2)`\], BF~01~= `r round(h3 $hypothesis$Evid.Ratio , 2)`) )


# Discussion

Experiment 1 indicated that participants categorize beyond the binary when response options include more options than women and men only. However, the free text option did not differ from the binary option. Thus, the written out choices seem to act as reminders to participants. Furthermore, categorization beyond the binary affected former man and women responses to similar degrees, meaning that the ratio of women and men categorizations was still about 50/50. This did not systematically affect their overall pattern of responses in terms of woman and man categorizations.


# General discussion

This study aimed to test how different response options of gender categorization influence how gender is categorized In study 1 we compared one-dimensional and two-dimensional continuous scales, and in Study 2, we compared binary (traditional) response options, with multiple categories and free-text answers.  In both studies we used a multiracial set of morphed faces to show responses to a variety of femininity and masculinity in faces. 

We found a strong tendency for binary treatment of gender, both in terms that people rated gender categorically in Study 1, and that most participants that have the possibility to indicate other gender than woman or man did not (Study 2). However, we also found that multiple options made people aware of gender beyond the binary, to the extent that a third of participants made such categorizations, but only when these were explicitly spelled out. In the free text condition, almost no participants categorized gender beyond the binary.

The finding that participants use non-binary response options are somewhat consistent with previous research, such as the work of @saperstein_categorical_2021 and @lindqvist_what_2020, which has shown that including flexible response options allow participants to better express themselves. Unlike the literature on self-categorization, increased freedom did not increase the gender diversity of participants' categorizations. This likely reflects the difference between categorizing oneself and categorizing others. Non-binary are likely to be hyper-aware of their own non-binary gender identity (Richards et al,) whereas cisgender participants are seemingly not as likely to think about. It may also be the case that particiants are not aware that categorizing beyond the binary was not an option.

When participants categorized women or men on continuous scales, the results differ from @bem_measurement_1974 who found that participants categorize their own femininity and masculinity independently of each other. Rather, when categorizing others, the participants in the present study seemed to treat women and men as opposites, even when the response options did not pose them as such. Both of these deviations from the previous literature likely stem from the substantial difference between indicating one's own gender and categorizing that of others.

It is worth noting that this study only examined participants' stated categorizations, and it is possible that they may have made other categorizations internally that were not reflected in their responses. However, it is important to recognize that a purely behavioral study such as this cannot fully capture the neurological processes underlying gender categorization, which may require more sophisticated techniques such as EEG and eye-tracking [@kloth_neural_2010; @stolier_neural_2017].

In this study we aggregated responses that did not indicate woman or man. In the multiple response option condition, both "I don't know" and "Non-binary" were included as a beyond binary categorization. We justified this on the basis that what we were interested in is any categorization beyond the binary. However, these two options are not the same. Furthermore, it is important to note that many non-binary individuals do not have a prototypically androgynous gender expression   [@richards_non-binary_2016]. Therefore, if a person aims to be inclusive and not categorize in a binary way, then abstaining from categorizing, for example by selecting "I don't know" is always the best option.

In the introduction we raised the possibility that findings within gender categorization research may be biased from a sole reliance on binary response options. Based on the present results, this seems unlikely. Instead, it seems that the societal norm to treat gender as binary is the strongest determinant participants gender categorizations. Even so, we recommend researchers to carefully consider their measurements of gender categorization. Open text-boxes, forced choice-alternatives and continua are all viable alternatives. Even researchers who are primarily interested in binary categorizations should consider including beyond-binary alternatives, to avoid perpetuating the binary gender norm and to accurately represent the diversity of gender.

#### Conclusion

In two experiments we tested how different response alternatives affected gender categorizations. Participants were more likely to categorize faces beyond the binary when using a forced-choice paradigm including "non-binary" and "I don't know" than when using a free text option, or slider scales. In comparison to self-identification questions where open ended responses are seen as the most inclusive alternative [@lindqvist_what_2020], categorization of others benefit from response options that explicitly reminds participants that not all people identify as women or men.



\newpage

# References

::: {#refs custom-style="Bibliography"}
:::
